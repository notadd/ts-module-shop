{"version":3,"sources":["model/goods.entity.ts"],"names":[],"mappings":"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","file":"goods.entity.js","sourcesContent":["import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn, OneToMany, ManyToOne, ManyToMany } from \"typeorm\";\nimport { PropertyValue } from \"./property.value.entity\";\nimport { ThirdClassify } from \"./third.classify.entity\";\nimport { GoodsImage } from \"./goods.image.entity\";\nimport { GoodsType } from \"./goods.type.entity\";\nimport { Floor } from \"./floor.entity\";\nimport { Brand } from \"./brand.entity\";\nimport { Sku } from \"./sku.entity\";\n\n/* 商品实体，为一个商品的基本属性，名称、描述、基本价格等，一个商品必然属于一个分类、一个商品类型\n   商品包含了多个属性值，有些为唯一属性，即直接属于商品，有些是单选、复选属性，属于指定价格的单品\n*/\n@Entity(\"goods\")\nexport class Goods {\n\n    @PrimaryGeneratedColumn()\n    id: number;\n\n    @Column({\n        length: 50,\n        unique: true\n    })\n    name: string;\n\n    @Column({\n        length: 50\n    })\n    no: string;\n\n    /* 商品基本价格，最终价格由基本价格与属性价格相加决定 */\n    @Column({\n        type: \"decimal\",\n        precision: 10,\n        scale: 2\n    })\n    basePrice: number;\n\n    /* 商品折扣价格 */\n    @Column({\n        type: \"decimal\",\n        precision: 10,\n        scale: 2,\n        nullable: true\n    })\n    discountPrice: number;\n\n    @Column({\n        type: \"text\"\n    })\n    description: string;\n\n    @Column({\n        default: false\n    })\n    recycle: boolean;\n\n    @Column()\n    classifyId: number;\n\n    @Column()\n    typeId: number;\n\n    /* 分类删除时，其下存在商品，需要报错，不级联删除 */\n    @ManyToOne(type => ThirdClassify, thirdClassify => thirdClassify.goodses, {\n        cascade: false,\n        onDelete: \"RESTRICT\",\n        nullable: false,\n        lazy: false,\n        eager: false\n    })\n    classify: ThirdClassify;\n\n    /* 商品品牌 */\n    @ManyToOne(type => Brand, brand => brand.goodses, {\n        cascade: false,\n        onDelete: \"RESTRICT\",\n        nullable: true,\n        lazy: false,\n        eager: false\n    })\n    brand: Brand;\n\n    /* 商品类型删除时，其下存在商品需要报错，不级联删除 */\n    @ManyToOne(type => GoodsType, goodsType => goodsType.goodses, {\n        cascade: false,\n        onDelete: \"RESTRICT\",\n        nullable: false,\n        lazy: false,\n        eager: false\n    })\n    type: GoodsType;\n\n    /* 商品所属楼层,商品楼层为多对多关系 */\n    @ManyToMany(type => Floor, floor => floor.goodses, {\n        cascade: false,\n        lazy: false,\n        eager: false\n    })\n    floors: Array<Floor>;\n\n    @OneToMany(type => PropertyValue, propertyValue => propertyValue.goods, {\n        cascade: false,\n        lazy: false,\n        eager: false\n    })\n    values: Array<PropertyValue>;\n\n    @OneToMany(type => GoodsImage, goodsImage => goodsImage.goods, {\n        cascade: false,\n        lazy: false,\n        eager: false\n    })\n    images: Array<GoodsImage>;\n\n    @OneToMany(type => Sku, sku => sku.goods, {\n        cascade: false,\n        lazy: false,\n        eager: false\n    })\n    skus: Array<Sku>;\n}\n"]}