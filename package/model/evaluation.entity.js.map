{"version":3,"sources":["model/evaluation.entity.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,qCAAiJ;AACjJ,uEAA4D;AAC5D,2DAAgD;AAChD,uCAAoC;AAIpC,IAAa,UAAU,GAAvB;CAsDC,CAAA;AAnDG;IADC,gCAAsB,EAAE;;sCACd;AAGX;IADC,gBAAM,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;;2CACR;AAGhB;IADC,gBAAM,EAAE;;2CACQ;AAIjB;IADC,gBAAM,EAAE;;0CACM;AAIf;IADC,gBAAM,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;;+CACL;AAQpB;IALC,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,yCAAe,EAAE,eAAe,CAAC,EAAE,CAAC,eAAe,CAAC,UAAU,EAAE;QAC/E,OAAO,EAAE,CAAC,QAAQ,CAAC;QACnB,IAAI,EAAE,KAAK;QACX,KAAK,EAAE,KAAK;KACf,CAAC;8BACM,KAAK;0CAAkB;AAU/B;IAPC,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,WAAI,EAAE;QACrB,OAAO,EAAE,KAAK;QACd,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,KAAK;QACX,KAAK,EAAE,KAAK;QACZ,QAAQ,EAAE,SAAS;KACtB,CAAC;8BACI,WAAI;wCAAC;AAiBX;IAXC,kBAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,6BAAS,EAAE,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,UAAU,EAAE;QAC5D,OAAO,EAAE,CAAC,QAAQ,CAAC;QACnB,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,KAAK;QACX,KAAK,EAAE,KAAK;QACZ,QAAQ,EAAE,SAAS;KACtB,CAAC;IACD,oBAAU,CAAC;QACR,IAAI,EAAE,aAAa;QACnB,oBAAoB,EAAE,IAAI;KAC7B,CAAC;8BACS,6BAAS;6CAAC;AApDZ,UAAU;IADtB,gBAAM,CAAC,YAAY,CAAC;GACR,UAAU,CAsDtB;AAtDY,gCAAU","file":"evaluation.entity.js","sourcesContent":["import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn, OneToOne, OneToMany, ManyToOne, JoinColumn } from \"typeorm\";\nimport { EvaluationImage } from \"./evaluation.image.entity\";\nimport { OrderItem } from \"./order.item.entity\";\nimport { User } from \"@notadd/user\";\n\n/* 用户评论实体类，用户只有在一笔订单完成之后才能对订单中的一个单品进行评论 */\n@Entity(\"evaluation\")\nexport class Evaluation {\n\n    @PrimaryGeneratedColumn()\n    id: number;\n\n    @Column({ length: 200 })\n    content: string;\n\n    @Column()\n    display: boolean;\n\n    /**/\n    @Column()\n    userId: number;\n\n    /* 订单项外键列，也需要唯一性约束 */\n    @Column({ unique: true })\n    orderItemId: number;\n\n    /* 评价图片，保存评价时可以级联保存图片 */\n    @OneToMany(type => EvaluationImage, evaluationImage => evaluationImage.evaluation, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    images: Array<EvaluationImage>;\n\n    /* 用户与评论是ManyToOne关系，一个用户有多个评价 */\n    @ManyToOne(type => User, {\n        cascade: false,\n        nullable: false,\n        lazy: false,\n        eager: false,\n        onDelete: \"CASCADE\"\n    })\n    user: User;\n\n    /*\n    评价与订单项是一对一关系，用户只能在完成订单后对订单中的订单项进行评论\n    关系可以级联更新订单项\n    */\n    @OneToOne(type => OrderItem, orderItem => orderItem.evaluation, {\n        cascade: [\"update\"],\n        nullable: false,\n        lazy: false,\n        eager: false,\n        onDelete: \"CASCADE\"\n    })\n    @JoinColumn({\n        name: \"orderItemId\",\n        referencedColumnName: \"id\"\n    })\n    orderItem: OrderItem;\n\n}\n"]}